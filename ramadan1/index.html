<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadan Timetable 2026 - Digital Card</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --app-bg: #043b35; 
            --pill-bg: rgba(255, 255, 255, 0.15);
            --text-white: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.7);
            --primary-green: #165F52;
            --cream-bg: #F6F8F1;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: #333; 
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .app-frame {
            width: 100%;
            max-width: 412px;
            background-color: #Fdfdfd; 
            color: #333; 
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            overflow-y: auto; 
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- HEADER SECTION --- */
        .header-container {
            padding: 15px 15px 0 15px;
            background-color: var(--app-bg);
            color: var(--text-white);
            flex-shrink: 0;
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 12px;
            padding-top: 5px;
        }

        .header-title {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .share-btn {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: auto;
            cursor: pointer;
        }

        .header-divider {
            height: 1px;
            background-color: rgba(255, 255, 255, 0.1);
            width: 100%;
            margin-bottom: 12px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 5px; 
        }

        .location-pill {
            background-color: var(--pill-bg);
            padding: 6px 10px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .location-icon {
            width: 12px;
            height: auto;
        }

        .location-text {
            font-size: 13px;
            font-weight: 500;
        }

        .disclaimer {
            font-size: 10px;
            color: var(--text-dim);
            text-align: right;
        }

        /* --- HERO (QUOTE) SECTION --- */
        .hero-section {
            position: relative;
            background-image: url('./Assets/Images/hero-banner.png');
            background-size: contain;
            background-position: center top;
            background-repeat: no-repeat;
            display: flex;
            align-items: flex-start; 
            justify-content: center;
            padding: 10px 20px 25px; 
            min-height: 120px;
            flex-shrink: 0;
            color: white; 
        }

        .hero-section::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, var(--app-bg) 0%, transparent 20%);
        }

        .quote-container {
            text-align: center;
            position: relative;
            z-index: 2;
            padding: 0 30px;
            margin-top: 4px;
        }

        .quote-text {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 20px;
            line-height: 1.4;
            margin-bottom: 8px; 
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .quote-source {
            font-family: 'Roboto', sans-serif;
            font-style: italic;
            font-size: 12px;
            font-weight: 500;
            opacity: 0.9;
        }

        .nav-btn {
            position: absolute;
            top: 40%; 
            width: 32px;
            height: 32px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.6);
            transition: all 0.2s;
            font-size: 14px;
            z-index: 5;
        }
        
        .nav-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .nav-btn.left { left: 15px; }
        .nav-btn.right { right: 15px; }

        /* --- TIMER SECTION --- */
        .timer-section {
            background-color: transparent; 
            padding: 10px 15px 10px 15px;
            margin-top: -10px;
            position: relative;
            z-index: 10;
        }

        .timer-card {
            background-image: url('./Assets/Images/timer-banner.png');
            background-size: cover;
            background-position: center;
            background-color: #F8F5E9;
            border-radius: 16px;
            padding: 25px 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            border: 1px solid rgba(0,0,0,0.05);
        }

        .timer-heading {
            font-family: 'Playfair Display', serif;
            color: #8B7E56;
            font-size: 16px;
            font-style: italic;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .timer-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .time-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 50px;
        }

        .time-val {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            font-weight: 700;
            color: #0B4F4A;
            line-height: 1;
        }

        .time-label {
            font-family: 'Playfair Display', serif;
            font-size: 11px;
            font-weight: 700;
            color: #0B4F4A;
            margin-top: 5px;
        }

        .timer-footer {
            font-family: 'Playfair Display', serif;
            color: #8B7E56;
            font-size: 13px;
            margin-top: 10px;
        }

        /* --- TIMETABLE SECTION --- */
        .timetable-section {
            background-color: #Fdfdfd;
            padding: 0 15px 20px 15px;
            padding-top: 10px;
        }

        .timetable-title {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            color: #333;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 500;
            margin-top: 10px;
        }

        .timetable-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 25px;
        }

        /* --- ROZA CARD STYLES --- */
        .roza-card {
            background-color: #F2F9F8;
            border-radius: 12px;
            padding: 12px 8px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid #B6CCC5;
            transition: transform 0.2s;
        }

        .roza-header-box {
            background-color: #E3F1F0;
            width: 100%;
            border-radius: 6px;
            padding: 6px 0;
            margin-bottom: 6px;
        }

        .roza-count {
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            font-size: 15px;
            color: #043b35;
            margin-bottom: 2px;
            font-family: Cambria;
        }

        .roza-date {
            font-size: 12px;
            font-weight: 400;
            color: #043b35;
            font-family: Cambria;
        }

        .roza-day {
            font-size: 11px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
            font-family: Cambria;
        }

        .card-divider {
            height: 1px;
            background-color: #CFE0DE;
            width: 90%;
            margin-bottom: 8px;
        }

        .time-text {
            font-size: 10px;
            font-weight: 400;
            color: #043b35;
            margin-bottom: 3px;
            white-space: nowrap;
            font-family: Cambria;
        }

        /* Active State */
        .roza-card.active {
            background-color: #165F52;
            border-color: #B6CCC5;
            transform: scale(1.04);
            z-index: 5;
            position: relative;
            font-family: Cambria;
        }

        .roza-card.active .roza-header-box { background-color: #ffffff; }
        .roza-card.active .roza-count, .roza-card.active .roza-date { color: #043b35; }
        .roza-card.active .roza-day { color: #ffffff; }
        .roza-card.active .card-divider { background-color: rgba(255, 255, 255, 0.3); }
        .roza-card.active .time-text { color: #ffffff; }

        .view-btn {
            background-color: #165F52;
            color: white;
            border: none;
            padding: 14px 0;
            width: 60%;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            gap: 8px;
            cursor: pointer;
            font-family: Cambria;
        }

        /* --- DUA SECTION --- */
        .dua-section {
            background-color: #F6F8F1;
            padding: 25px 0 30px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .dua-title-main {
            font-family: 'Playfair Display', serif;
            font-size: 26px;
            color: #000;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .dua-slider-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 0 10px;
        }

        .dua-arrow-btn {
            background: none;
            border: 2px solid #E0E0E0;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #B0B0B0;
            cursor: pointer;
            font-size: 14px;
            flex-shrink: 0;
            transition: all 0.2s;
        }
        
        .dua-arrow-btn:hover {
            border-color: #bbb;
            color: #888;
        }

        .dua-image-holder {
            flex-grow: 1;
            padding: 0 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .dua-img-actual {
            max-width: 100%;
            height: auto;
            max-height: 250px;
            object-fit: contain;
        }

        /* --- BANNER SECTION --- */
        .ad-section {
            background-color: #Fdfdfd;
            padding: 10px 15px 5px 15px;
            display: flex;
            justify-content: center;
        }

        .ad-banner-img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        /* --- CONNECT CARD --- */
        .contact-section {
            background-color: #F9F8F4; 
            padding: 25px 20px;
            margin: 0 15px 30px 15px; 
            border-radius: 12px;
            text-align: center;
            border: 1px solid #E0E0E0; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.03); 
        }

        .contact-title {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 700;
            color: #165F52; 
            margin-bottom: 20px;
            letter-spacing: 0.2px;
        }

        .contact-icons-container {
            display: flex;
            justify-content: center;
            gap: 30px; 
            margin-bottom: 15px;
        }

        .icon-btn {
            color: #165F52; 
            font-size: 26px; 
            cursor: pointer;
            transition: transform 0.2s;
            text-decoration: none;
        }

        .icon-btn:hover {
            transform: scale(1.15);
        }

        .contact-helper-text {
            font-family: 'Playfair Display', serif;
            font-size: 14px;
            font-style: italic;
            color: #777; 
            font-weight: 500;
        }

        /* --- FOOTER SECTION --- */
        .app-footer {
            background-color: #165F52; 
            color: white;
            padding: 20px 20px 30px;
            margin-top: auto;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }

        .footer-nav {
            display: flex;
            justify-content: center;
            gap: 25px;
            padding: 15px 0;
            border-top: 1px solid rgba(255,255,255,0.4);
            border-bottom: 1px solid rgba(255,255,255,0.4);
            margin-bottom: 20px;
        }

        .footer-nav a {
            color: white;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
        }

        .footer-info p {
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 400;
        }

        .footer-link {
            color: white;
            font-size: 14px;
            text-decoration: underline;
            text-decoration-thickness: 1px;
            text-underline-offset: 3px;
            display: block;
            margin-bottom: 8px;
        }

    </style>
</head>
<body>

    <div class="app-frame">
        
        <div class="header-container">
            <div class="header-top">
                <div class="header-title">Ramadan timetable 2026/1447H</div>
                <img src="./Assets/Icon/Share.png" alt="Share" class="share-btn" onclick="shareApp()">
            </div>

            <div class="header-divider"></div>

            <div class="header-info">
                <div class="location-pill">
                    <img src="./Assets/Icon/Location.png" alt="Loc" class="location-icon">
                    <span class="location-text">Mumbai, India</span>
                </div>
                <div class="disclaimer">Sehri & Iftar times vary by city</div>
            </div>
        </div>

        <section class="hero-section">
            <div class="nav-btn left">
                <i class="fas fa-chevron-left"></i>
            </div>
            
            <div class="quote-container">
                <div class="quote-text">“When Ramadan begins, the gates of Paradise are opened.”</div>
                <div class="quote-source">(Sahih al-Bukhari 1899)</div>
            </div>

            <div class="nav-btn right">
                <i class="fas fa-chevron-right"></i>
            </div>
        </section>

        <section class="timer-section">
            <div class="timer-card">
                <div class="timer-heading" id="countdown-title">Ramadan begins in</div>
                
                <div class="timer-grid">
                    <div class="time-unit">
                        <span class="time-val" id="cd-days">35</span>
                        <span class="time-label">Days</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="cd-hours">06</span>
                        <span class="time-label">Hours</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="cd-minutes">12</span>
                        <span class="time-label">Minutes</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="cd-seconds">45</span>
                        <span class="time-label">Seconds</span>
                    </div>
                </div>

                <div class="timer-footer">Prepare your heart and time for Ramadan</div>
            </div>
        </section>

        <section class="timetable-section">
            <h2 class="timetable-title">Daily Ramadan timetable</h2>
            
            <div class="timetable-grid" id="timetable-list">
                </div>

            <button class="view-btn" id="view-all-btn">
                <span id="btn-text">View Complete Timetable</span>
                <i class="fas fa-arrow-right" id="btn-icon"></i>
            </button>
        </section>

          <section class="ad-section">
            <img src="./Assets/Images/ad1.png" alt="Sponsored by Printage" class="ad-banner-img">
        </section>

        <section class="dua-section">
            <h2 class="dua-title-main">Dua of the day</h2>
            
            <div class="dua-slider-container">
                <button class="dua-arrow-btn">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <div class="dua-image-holder">
                    <img src="./Assets/Images/Dua1.png" alt="Dua" class="dua-img-actual">
                </div>
                
                <button class="dua-arrow-btn">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>
        
        <section class="ad-section">
            <img src="./Assets/Images/ad2.png" alt="Sponsored by Printage" class="ad-banner-img">
        </section>

        <section class="contact-section">
            <h3 class="contact-title">Connect With PRINTAGE!</h3>
            
            <div class="contact-icons-container">
                <a class="icon-btn"><i class="fas fa-phone-alt"></i></a>
                <a class="icon-btn"><i class="fab fa-whatsapp"></i></a>
                <a class="icon-btn"><i class="fab fa-facebook-f"></i></a>
                <a class="icon-btn"><i class="fas fa-globe"></i></a>
                <a class="icon-btn"><i class="fab fa-instagram"></i></a>
            </div>
            
            <p class="contact-helper-text">Tap to call, chat, or explore our work</p>
        </section>

        <footer class="app-footer">
            <div class="footer-nav">
                <a href="#">Home</a>
                <a href="#">Timetable</a>
                <a href="#">About</a>
                <a href="#">Contact</a>
            </div>
            <div class="footer-info">
                <p>Ramadan timetable 2026 (Mumbai)</p>
                <a href="#" class="footer-link">About Digital Ramadan Timetable</a>
                <p>Concept By Printage</p>
            </div>
        </footer>

    </div>

    <script>
        const DEMO_MODE = false; 

        // --- Data: Full 30-Day Timetable ---
        const fullTimetableData = [
            { roza: 1, date: "Feb 19", day: "Thu", sehri: "05:51 AM", iftar: "06:40 PM" },
            { roza: 2, date: "Feb 20", day: "Fri", sehri: "05:51 AM", iftar: "06:40 PM" },
            { roza: 3, date: "Feb 21", day: "Sat", sehri: "05:50 AM", iftar: "06:41 PM" },
            { roza: 4, date: "Feb 22", day: "Sun", sehri: "05:49 AM", iftar: "06:41 PM" },
            { roza: 5, date: "Feb 23", day: "Mon", sehri: "05:49 AM", iftar: "06:42 PM" },
            { roza: 6, date: "Feb 24", day: "Tue", sehri: "05:48 AM", iftar: "06:42 PM" },
            { roza: 7, date: "Feb 25", day: "Wed", sehri: "05:47 AM", iftar: "06:43 PM" },
            { roza: 8, date: "Feb 26", day: "Thu", sehri: "05:46 AM", iftar: "06:43 PM" },
            { roza: 9, date: "Feb 27", day: "Fri", sehri: "05:46 AM", iftar: "06:43 PM" },
            { roza: 10, date: "Feb 28", day: "Sat", sehri: "05:45 AM", iftar: "06:44 PM" },
            { roza: 11, date: "Mar 01", day: "Sun", sehri: "05:44 AM", iftar: "06:44 PM" },
            { roza: 12, date: "Mar 02", day: "Mon", sehri: "05:43 AM", iftar: "06:45 PM" },
            { roza: 13, date: "Mar 03", day: "Tue", sehri: "05:42 AM", iftar: "06:45 PM" },
            { roza: 14, date: "Mar 04", day: "Wed", sehri: "05:41 AM", iftar: "06:45 PM" },
            { roza: 15, date: "Mar 05", day: "Thu", sehri: "05:40 AM", iftar: "06:46 PM" },
            { roza: 16, date: "Mar 06", day: "Fri", sehri: "05:40 AM", iftar: "06:46 PM" },
            { roza: 17, date: "Mar 07", day: "Sat", sehri: "05:39 AM", iftar: "06:46 PM" },
            { roza: 18, date: "Mar 08", day: "Sun", sehri: "05:38 AM", iftar: "06:47 PM" },
            { roza: 19, date: "Mar 09", day: "Mon", sehri: "05:37 AM", iftar: "06:47 PM" },
            { roza: 20, date: "Mar 10", day: "Tue", sehri: "05:36 AM", iftar: "06:47 PM" },
            { roza: 21, date: "Mar 11", day: "Wed", sehri: "05:35 AM", iftar: "06:48 PM" },
            { roza: 22, date: "Mar 12", day: "Thu", sehri: "05:34 AM", iftar: "06:48 PM" },
            { roza: 23, date: "Mar 13", day: "Fri", sehri: "05:33 AM", iftar: "06:48 PM" },
            { roza: 24, date: "Mar 14", day: "Sat", sehri: "05:32 AM", iftar: "06:49 PM" },
            { roza: 25, date: "Mar 15", day: "Sun", sehri: "05:31 AM", iftar: "06:49 PM" },
            { roza: 26, date: "Mar 16", day: "Mon", sehri: "05:30 AM", iftar: "06:49 PM" },
            { roza: 27, date: "Mar 17", day: "Tue", sehri: "05:29 AM", iftar: "06:50 PM" },
            { roza: 28, date: "Mar 18", day: "Wed", sehri: "05:28 AM", iftar: "06:50 PM" },
            { roza: 29, date: "Mar 19", day: "Thu", sehri: "05:27 AM", iftar: "06:50 PM" },
            { roza: 30, date: "Mar 20", day: "Fri", sehri: "05:26 AM", iftar: "06:51 PM" },
        ];

        let isFullView = false;
        const INITIAL_COUNT = 6; 

        function getTodayString() {
            const date = new Date();
            const month = date.toLocaleString('default', { month: 'short' }); 
            const day = String(date.getDate()).padStart(2, '0');
            return `${month} ${day}`;
        }

        // --- RENDER LOGIC ---
        function createRowHtml(item) {
            const todayString = getTodayString();
            const isToday = (item.date.toLowerCase() === todayString.toLowerCase());
            
            // Highlight if TODAY or FRIDAY
            const isFriday = (item.day === 'Fri'); 
            const activeClass = (isToday || isFriday) ? 'active' : '';

            return `
                <div class="roza-card ${activeClass}">
                    <div class="roza-header-box">
                        <div class="roza-count">Roza ${item.roza}</div>
                        <div class="roza-date">${item.date}</div>
                    </div>
                    <div class="roza-day">${item.day}</div>
                    <div class="card-divider"></div>
                    <div class="time-text">Sehri: ${item.sehri}</div>
                    <div class="time-text">Iftar: ${item.iftar}</div>
                </div>
            `;
        }

        function renderTimetable() {
            const container = document.getElementById('timetable-list');
            const btnText = document.getElementById('btn-text');
            const btnIcon = document.getElementById('btn-icon');
            const btn = document.getElementById('view-all-btn');
            
            if (!container) return;
            
            // 1. Filter out PAST dates
            const todayString = getTodayString();
            const todayIndex = fullTimetableData.findIndex(item => item.date.toLowerCase() === todayString.toLowerCase());
            
            // If today matches, start from todayIndex. If not (e.g. pre-Ramadan), start from 0.
            const startIndex = (todayIndex !== -1) ? todayIndex : 0;
            const remainingRoza = fullTimetableData.slice(startIndex);

            container.innerHTML = ''; 

            if (remainingRoza.length === 0) {
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #666; padding: 20px;">Ramadan has ended.</div>';
                if(btn) btn.style.display = 'none';
                return;
            }

            if (!isFullView) {
                // Show first few remaining rows
                const viewData = remainingRoza.slice(0, INITIAL_COUNT);
                viewData.forEach(item => { container.innerHTML += createRowHtml(item); });
                
                if (btnText) btnText.innerText = "View Complete Timetable";
                if (btnIcon) btnIcon.style.transform = "rotate(0deg)";
                
                // Hide button if no more rows to show
                if(btn) btn.style.display = (remainingRoza.length <= INITIAL_COUNT) ? 'none' : 'flex';

            } else {
                // Show All remaining rows
                remainingRoza.forEach(item => { container.innerHTML += createRowHtml(item); });
                
                if (btnText) btnText.innerText = "Show Less";
                if (btnIcon) btnIcon.style.transform = "rotate(180deg)";
                if(btn) btn.style.display = 'flex';
            }
        }

        function toggleView() {
            const container = document.getElementById('timetable-list');
            isFullView = !isFullView;
            if (!isFullView) {
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            renderTimetable();
        }

        // --- TIMER LOGIC ---
        function parseTime(timeStr, baseDate) {
            const [time, modifier] = timeStr.split(' ');
            let [hours, minutes] = time.split(':');
            if (hours === '12') { hours = '00'; }
            if (modifier === 'PM') { hours = parseInt(hours, 10) + 12; }
            const date = new Date(baseDate);
            date.setHours(hours, minutes, 0, 0);
            return date;
        }

        function startCountdown() {
            const ramadanStartDate = new Date("February 19, 2026 00:00:00");
            const titleElement = document.getElementById('countdown-title');
            
            setInterval(function() {
                const now = new Date();
                let targetDate;
                let labelText = "";

                if (now < ramadanStartDate) {
                    targetDate = ramadanStartDate;
                    labelText = "Ramadan begins in";
                } else {
                    const month = now.toLocaleString('default', { month: 'short' }); 
                    const day = String(now.getDate()).padStart(2, '0');
                    const todayStr = `${month} ${day}`;
                    const todayData = fullTimetableData.find(d => d.date.toLowerCase() === todayStr.toLowerCase());

                    if (todayData) {
                        const sehriTime = parseTime(todayData.sehri, now);
                        const iftarTime = parseTime(todayData.iftar, now);

                        if (now < sehriTime) {
                            targetDate = sehriTime;
                            labelText = `Sehri ends in (Roza ${todayData.roza})`;
                        } else if (now >= sehriTime && now < iftarTime) {
                            targetDate = iftarTime;
                            labelText = `Iftar begins in (Roza ${todayData.roza})`;
                        } else {
                             labelText = "Day Ends"; 
                             targetDate = null; 
                        }
                    } else {
                         labelText = "Ramadan Ended";
                         targetDate = null;
                    }
                }

                if (titleElement) titleElement.innerHTML = labelText;

                if (targetDate) {
                    const distance = targetDate - now;
                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    
                    const dEl = document.getElementById("cd-days");
                    const hEl = document.getElementById("cd-hours");
                    const mEl = document.getElementById("cd-minutes");
                    const sEl = document.getElementById("cd-seconds");

                    if (dEl) dEl.innerText = days >= 0 ? String(days).padStart(2, '0') : "00";
                    if (hEl) hEl.innerText = hours >= 0 ? String(hours).padStart(2, '0') : "00";
                    if (mEl) mEl.innerText = minutes >= 0 ? String(minutes).padStart(2, '0') : "00";
                    if (sEl) sEl.innerText = seconds >= 0 ? String(seconds).padStart(2, '0') : "00";
                }
            }, 1000);
        }

        function shareApp() {
            if (navigator.share) {
                navigator.share({
                    title: 'Ramadan Timetable 2026',
                    text: 'Check out the Ramadan 2026 Timetable for Mumbai',
                    url: window.location.href
                }).catch(console.error);
            } else {
                alert('Share feature not supported on this browser.');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            startCountdown();
            renderTimetable();
            const btn = document.getElementById('view-all-btn');
            if (btn) { btn.addEventListener('click', toggleView); }
        });

    </script>

</body>
</html>